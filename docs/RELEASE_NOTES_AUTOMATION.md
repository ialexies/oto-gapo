# Automated Release Notes in Codemagic

**Last Updated:** October 17, 2025  
**Status:** ‚úÖ CONFIGURED

## Overview

Codemagic can automatically add release notes (What's New) to your Google Play Store releases. This guide covers three approaches from simplest to most automated.

---

## Current Configuration

‚úÖ **Status:** Automatic release notes are **ENABLED**

Your `codemagic.yaml` is configured to use:

```yaml
google_play:
  whats_new: PLAY_STORE_WHATS_NEW.txt
```

This means every production release will include the contents of `PLAY_STORE_WHATS_NEW.txt` as release notes.

---

## Option 1: Single Static File (Current Setup) ‚≠ê SIMPLEST

### How It Works

- Codemagic reads release notes from a single file
- Same notes appear for all releases until you manually update the file
- Best for: Simple projects, infrequent releases

### Configuration

```yaml
google_play:
  whats_new: PLAY_STORE_WHATS_NEW.txt
```

### Workflow

1. **Before each release**, update `PLAY_STORE_WHATS_NEW.txt`:

   ```txt
   üéâ What's New in v1.2.0!

   ‚ú® New Features:
   ‚Ä¢ Added dark mode support
   ‚Ä¢ New payment methods
   ‚Ä¢ Push notifications

   üêõ Bug Fixes:
   ‚Ä¢ Fixed login issue on Android 14
   ‚Ä¢ Improved app stability

   üìù Note: Keep release notes under 500 characters for best display
   ```

2. **Create release tag:**

   ```bash
   git add PLAY_STORE_WHATS_NEW.txt
   git commit -m "chore: update release notes for v1.2.0"
   git tag v1.2.0
   git push origin v1.2.0
   ```

3. **Codemagic automatically:**
   - Builds the app
   - Uploads to Play Store
   - Includes your release notes

### Pros & Cons

‚úÖ **Pros:**

- Very simple to set up
- Easy to control exact wording
- No scripting required

‚ùå **Cons:**

- Must manually update before each release
- Same notes for all languages (unless using Option 3)
- Risk of forgetting to update

---

## Option 2: Dynamic Release Notes from CHANGELOG üöÄ RECOMMENDED

### How It Works

- Script extracts the latest version section from `CHANGELOG.md`
- Automatically generates release notes from your changelog
- Best for: Teams maintaining changelogs, frequent releases

### Configuration

1. **Add script to generate release notes:**

```bash
# Create the script
cat > scripts/generate_release_notes.sh << 'EOF'
#!/bin/bash
# Extract release notes from CHANGELOG.md for the current version

VERSION=${CM_TAG#v}  # Remove 'v' prefix from tag
CHANGELOG="CHANGELOG.md"
OUTPUT="PLAY_STORE_WHATS_NEW.txt"

echo "üìù Generating release notes for version $VERSION..."

# Extract content between [X.Y.Z] and next [X.Y.Z] or end of file
awk -v version="$VERSION" '
  BEGIN { capture=0; found=0 }
  /^## \[/ {
    if (capture == 1) { exit }
    if ($0 ~ "\\[" version "\\]") { capture=1; found=1; next }
  }
  capture == 1 && /^### / { next }  # Skip section headers
  capture == 1 && /^[A-Za-z]/ { print "‚Ä¢ " $0; next }  # Add bullets
  capture == 1 && /^- / { print "‚Ä¢ " substr($0, 3); next }  # Convert bullets
  capture == 1 && NF > 0 { print }  # Print non-empty lines
  END { if (found == 0) { print "New features and improvements" } }
' "$CHANGELOG" > "$OUTPUT"

# Add header
sed -i "1iüéâ What's New in v${VERSION}!\n" "$OUTPUT"

# Limit to 500 characters (Play Store recommendation)
if [ $(wc -c < "$OUTPUT") -gt 500 ]; then
  echo "‚ö†Ô∏è  Warning: Release notes exceed 500 characters"
  echo "   Consider shortening for better display on Play Store"
fi

echo "‚úÖ Release notes generated: $OUTPUT"
cat "$OUTPUT"
EOF

chmod +x scripts/generate_release_notes.sh
```

2. **Update `codemagic.yaml`:**

```yaml
android-production:
  scripts:
    # ... existing scripts ...

    - name: Generate release notes from CHANGELOG
      script: |
        echo "üìù Generating release notes..."
        ./scripts/generate_release_notes.sh

    - name: Build Android App Bundle (AAB)
      script: |
        # ... existing build script ...

  publishing:
    google_play:
      credentials: $GCLOUD_SERVICE_ACCOUNT_CREDENTIALS
      track: $GOOGLE_PLAY_TRACK
      whats_new: PLAY_STORE_WHATS_NEW.txt # Generated by script
```

### Workflow

1. **Update CHANGELOG.md** (following Keep a Changelog format):

   ```markdown
   ## [1.2.0] - 2025-10-20

   ### Added

   - Dark mode support
   - Push notifications
   - New payment methods

   ### Fixed

   - Login issue on Android 14
   - Profile update crashes
   ```

2. **Commit and tag:**

   ```bash
   git add CHANGELOG.md
   git commit -m "chore: release v1.2.0"
   git tag v1.2.0
   git push origin v1.2.0
   ```

3. **Script automatically:**
   - Extracts v1.2.0 section from CHANGELOG
   - Converts to Play Store format
   - Saves to `PLAY_STORE_WHATS_NEW.txt`
   - Codemagic includes it in upload

### Pros & Cons

‚úÖ **Pros:**

- Automatic - one source of truth
- Encourages good changelog practices
- Consistent formatting
- Never forget to update release notes

‚ùå **Cons:**

- Requires maintaining CHANGELOG.md
- May need formatting adjustments
- Need to ensure CHANGELOG entries are concise

---

## Option 3: Multi-Language Release Notes üåç ADVANCED

### How It Works

- Create separate release notes for each language
- Play Store shows appropriate language to each user
- Best for: International apps, localized content

### Directory Structure

Create a `metadata/android` directory:

```
metadata/android/
‚îú‚îÄ‚îÄ en-US/
‚îÇ   ‚îî‚îÄ‚îÄ changelogs/
‚îÇ       ‚îî‚îÄ‚îÄ default.txt          # Default for all versions
‚îú‚îÄ‚îÄ id-ID/
‚îÇ   ‚îî‚îÄ‚îÄ changelogs/
‚îÇ       ‚îî‚îÄ‚îÄ default.txt          # Indonesian
‚îú‚îÄ‚îÄ ms-MY/
‚îÇ   ‚îî‚îÄ‚îÄ changelogs/
‚îÇ       ‚îî‚îÄ‚îÄ default.txt          # Malay
‚îî‚îÄ‚îÄ zh-CN/
    ‚îî‚îÄ‚îÄ changelogs/
        ‚îî‚îÄ‚îÄ default.txt          # Chinese
```

**OR** version-specific:

```
metadata/android/
‚îú‚îÄ‚îÄ en-US/
‚îÇ   ‚îî‚îÄ‚îÄ changelogs/
‚îÇ       ‚îú‚îÄ‚îÄ 1.txt                # Version code 1
‚îÇ       ‚îú‚îÄ‚îÄ 2.txt                # Version code 2
‚îÇ       ‚îî‚îÄ‚îÄ 3.txt                # Version code 3
‚îî‚îÄ‚îÄ id-ID/
    ‚îî‚îÄ‚îÄ changelogs/
        ‚îú‚îÄ‚îÄ 1.txt
        ‚îú‚îÄ‚îÄ 2.txt
        ‚îî‚îÄ‚îÄ 3.txt
```

### Configuration

```yaml
google_play:
  credentials: $GCLOUD_SERVICE_ACCOUNT_CREDENTIALS
  track: $GOOGLE_PLAY_TRACK
  # Point to metadata directory
  # Codemagic automatically detects localized changelogs
```

Codemagic's Fastlane integration automatically picks up files in `metadata/android/` structure.

### Example Files

**metadata/android/en-US/changelogs/default.txt:**

```txt
üéâ What's New!

‚ú® New Features:
‚Ä¢ Dark mode support
‚Ä¢ Push notifications
‚Ä¢ Multiple payment options

üêõ Bug Fixes:
‚Ä¢ Improved stability
‚Ä¢ Fixed login issues

Thank you for using Otogapo!
```

**metadata/android/id-ID/changelogs/default.txt:**

```txt
üéâ Apa yang Baru!

‚ú® Fitur Baru:
‚Ä¢ Dukungan mode gelap
‚Ä¢ Notifikasi push
‚Ä¢ Berbagai pilihan pembayaran

üêõ Perbaikan Bug:
‚Ä¢ Stabilitas ditingkatkan
‚Ä¢ Masalah login diperbaiki

Terima kasih telah menggunakan Otogapo!
```

### Workflow

1. **Update all language files** before release
2. **Tag and push:**

   ```bash
   git add metadata/
   git commit -m "chore: update release notes for v1.2.0"
   git tag v1.2.0
   git push origin v1.2.0
   ```

3. **Codemagic automatically:**
   - Detects localized release notes
   - Uploads appropriate version for each language
   - Users see notes in their language

### Pros & Cons

‚úÖ **Pros:**

- Professional localized experience
- Each market sees relevant notes
- Improved user engagement

‚ùå **Cons:**

- More maintenance overhead
- Need translators or translation service
- More complex setup

---

## Option 4: Git Commit Messages üéØ MOST AUTOMATED

### How It Works

- Automatically generates release notes from git commits
- Uses conventional commits format
- Best for: Disciplined teams using conventional commits

### Configuration

1. **Create generation script:**

```bash
cat > scripts/generate_notes_from_commits.sh << 'EOF'
#!/bin/bash
# Generate release notes from git commits since last tag

CURRENT_TAG="${CM_TAG}"
PREVIOUS_TAG=$(git describe --tags --abbrev=0 "${CURRENT_TAG}^" 2>/dev/null || echo "")

if [ -z "$PREVIOUS_TAG" ]; then
  echo "üéâ Initial release with exciting new features!"
  exit 0
fi

echo "üìù Generating release notes from commits..."
echo "   From: $PREVIOUS_TAG"
echo "   To: $CURRENT_TAG"

OUTPUT="PLAY_STORE_WHATS_NEW.txt"

cat > "$OUTPUT" << EOF
üéâ What's New in ${CURRENT_TAG#v}!

EOF

# Extract features
FEATURES=$(git log --pretty=format:"%s" "${PREVIOUS_TAG}..${CURRENT_TAG}" | grep "^feat" | sed 's/^feat[(:].*[)]: */‚Ä¢ /' | head -5)
if [ -n "$FEATURES" ]; then
  echo "‚ú® New Features:" >> "$OUTPUT"
  echo "$FEATURES" >> "$OUTPUT"
  echo "" >> "$OUTPUT"
fi

# Extract fixes
FIXES=$(git log --pretty=format:"%s" "${PREVIOUS_TAG}..${CURRENT_TAG}" | grep "^fix" | sed 's/^fix[(:].*[)]: */‚Ä¢ /' | head -3)
if [ -n "$FIXES" ]; then
  echo "üêõ Bug Fixes:" >> "$OUTPUT"
  echo "$FIXES" >> "$OUTPUT"
  echo "" >> "$OUTPUT"
fi

echo "üìù Thank you for using Otogapo!" >> "$OUTPUT"

echo "‚úÖ Generated release notes:"
cat "$OUTPUT"
EOF

chmod +x scripts/generate_notes_from_commits.sh
```

2. **Update codemagic.yaml:**

```yaml
scripts:
  - name: Generate release notes from commits
    script: |
      ./scripts/generate_notes_from_commits.sh
```

### Workflow

1. **Use conventional commits:**

   ```bash
   git commit -m "feat: add dark mode support"
   git commit -m "fix: resolve login issue on Android 14"
   git commit -m "feat: implement push notifications"
   ```

2. **Tag and push:**

   ```bash
   git tag v1.2.0
   git push origin v1.2.0
   ```

3. **Script automatically:**
   - Scans commits since last tag
   - Extracts features and fixes
   - Generates formatted release notes

### Pros & Cons

‚úÖ **Pros:**

- Fully automated
- Always in sync with actual changes
- Encourages good commit messages

‚ùå **Cons:**

- Requires team discipline with commits
- Less editorial control
- May need manual review/editing

---

## Best Practices

### Character Limits

- **Google Play recommendation:** 500 characters
- **Maximum:** 500 characters per language
- **Tip:** Be concise and focus on user-facing changes

### Formatting Tips

‚úÖ **Do:**

- Use emojis sparingly (üéâ ‚ú® üêõ üìù)
- Start with exciting new features
- Use bullet points for readability
- Focus on user benefits, not technical details
- Keep language simple and engaging

‚ùå **Don't:**

- Include technical jargon
- List internal refactoring
- Exceed 500 characters
- Use complex formatting (bold, italic, etc. - not supported)
- Include URLs (won't be clickable)

### Template Example

```txt
üéâ What's New in v1.2.0!

‚ú® New Features:
‚Ä¢ Dark mode - easier on your eyes at night
‚Ä¢ Push notifications - never miss important updates
‚Ä¢ More payment options - pay your way

üêõ Improvements:
‚Ä¢ Faster app launch
‚Ä¢ Smoother animations
‚Ä¢ Better stability

Thank you for your continued support!
```

---

## Testing Release Notes

### Before Publishing

1. **Check character count:**

   ```bash
   wc -c < PLAY_STORE_WHATS_NEW.txt
   ```

2. **Preview on Play Console:**

   - Go to Play Console ‚Üí Release ‚Üí Internal testing
   - View the release draft
   - Check how release notes display

3. **Test on device:**
   - Open Play Store on test device
   - View your app's internal test version
   - Check "What's New" section

### After Publishing

1. **Verify on Play Store:**

   - Visit your app's Play Store page
   - Scroll to "What's new"
   - Confirm correct content displays

2. **Check different languages** (if using Option 3):
   - Change device language
   - Verify appropriate translation appears

---

## Troubleshooting

### Issue: Release notes don't appear on Play Store

**Possible causes:**

1. **File path incorrect:**

   - Verify `whats_new: PLAY_STORE_WHATS_NEW.txt` path is correct
   - Check file exists at build time
   - Review Codemagic logs for warnings

2. **File empty or missing:**

   - Ensure file has content
   - Check Git included the file in push

3. **Fastlane upload issue:**
   - Check Codemagic logs for Fastlane errors
   - Verify Play Console API permissions

**Solution:**

```bash
# Debug in Codemagic
- name: Verify release notes file
  script: |
    if [ -f PLAY_STORE_WHATS_NEW.txt ]; then
      echo "‚úÖ Release notes file found"
      echo "Content:"
      cat PLAY_STORE_WHATS_NEW.txt
      echo ""
      echo "Character count: $(wc -c < PLAY_STORE_WHATS_NEW.txt)"
    else
      echo "‚ùå Release notes file NOT found"
      exit 1
    fi
```

---

### Issue: Release notes cut off or truncated

**Cause:** Exceeded 500 character limit

**Solution:**

1. Edit release notes to be more concise
2. Focus on 3-5 key changes
3. Add character count check:

```bash
CHAR_COUNT=$(wc -c < PLAY_STORE_WHATS_NEW.txt)
if [ $CHAR_COUNT -gt 500 ]; then
  echo "‚ö†Ô∏è  Warning: Release notes are $CHAR_COUNT characters (max 500)"
  exit 1
fi
```

---

### Issue: Special characters display incorrectly

**Cause:** Encoding issues

**Solution:**

- Ensure file is UTF-8 encoded:
  ```bash
  file -bi PLAY_STORE_WHATS_NEW.txt
  # Should show: text/plain; charset=utf-8
  ```
- Convert if needed:
  ```bash
  iconv -f ISO-8859-1 -t UTF-8 input.txt > output.txt
  ```

---

## Recommendations by Project Type

### Small Project / Solo Developer

‚Üí **Use Option 1** (Static file)

- Simplest to manage
- Full control
- Manual updates are quick

### Active Team / Multiple Releases

‚Üí **Use Option 2** (CHANGELOG automation)

- Maintains single source of truth
- Encourages documentation
- Automated but still curated

### International App / Multiple Markets

‚Üí **Use Option 3** (Multi-language)

- Professional user experience
- Required for global success
- Can combine with Option 2

### Large Team / Many Contributors

‚Üí **Use Option 4** (Git commits)

- Fully automated
- Scales with team size
- Works with existing workflows

---

## Implementation Checklist

### For Your Current Setup (Option 1)

‚úÖ **Already configured!** Your `codemagic.yaml` includes:

```yaml
whats_new: PLAY_STORE_WHATS_NEW.txt
```

**Next steps:**

1. ‚úÖ Verify file exists: `PLAY_STORE_WHATS_NEW.txt`
2. ‚úÖ Update before each release
3. ‚úÖ Keep under 500 characters
4. ‚úÖ Test with next release tag

### To Upgrade to Option 2 (CHANGELOG automation)

- [ ] Create `scripts/generate_release_notes.sh`
- [ ] Make script executable: `chmod +x scripts/generate_release_notes.sh`
- [ ] Add script step to `codemagic.yaml` before build
- [ ] Test locally: `CM_TAG=v1.2.0 ./scripts/generate_release_notes.sh`
- [ ] Commit and tag to test on Codemagic

### To Upgrade to Option 3 (Multi-language)

- [ ] Create `metadata/android/{locale}/changelogs/` structure
- [ ] Write release notes in each language
- [ ] Update `codemagic.yaml` to use metadata directory
- [ ] Test with internal track release

---

## Example: Full Automated Flow (Option 2)

Here's what a complete release looks like with automated release notes:

### 1. Update CHANGELOG.md

```markdown
## [1.2.0] - 2025-10-20

### Added

- Dark mode support for easier nighttime viewing
- Push notifications for important announcements
- Multiple payment methods (credit card, bank transfer, e-wallet)

### Fixed

- Login issue on Android 14 devices
- Crash when updating profile photo
- Payment history not displaying correctly
```

### 2. Commit and Tag

```bash
git add CHANGELOG.md pubspec.yaml
git commit -m "chore: release v1.2.0"
git tag v1.2.0
git push origin v1.2.0
```

### 3. Codemagic Automatically:

1. **Runs generate script:**

   ```
   üìù Generating release notes for version 1.2.0...
   ‚úÖ Release notes generated: PLAY_STORE_WHATS_NEW.txt
   ```

2. **Creates release notes:**

   ```txt
   üéâ What's New in v1.2.0!

   ‚Ä¢ Dark mode support for easier nighttime viewing
   ‚Ä¢ Push notifications for important announcements
   ‚Ä¢ Multiple payment methods (credit card, bank transfer, e-wallet)
   ‚Ä¢ Login issue on Android 14 devices
   ‚Ä¢ Crash when updating profile photo
   ‚Ä¢ Payment history not displaying correctly
   ```

3. **Builds and uploads to Play Store with release notes**

### 4. Result

Users see on Play Store:

```
What's new
üéâ What's New in v1.2.0!

‚Ä¢ Dark mode support for easier nighttime viewing
‚Ä¢ Push notifications for important announcements
‚Ä¢ Multiple payment methods
‚Ä¢ Fixed login issues
‚Ä¢ Improved stability
```

---

## Additional Resources

- **Codemagic Publishing Docs:** [docs.codemagic.io/yaml-publishing/google-play/](https://docs.codemagic.io/yaml-publishing/google-play/)
- **Fastlane Supply:** [docs.fastlane.tools/actions/supply/](https://docs.fastlane.tools/actions/supply/)
- **Play Console Release Notes Guide:** [support.google.com/googleplay/android-developer/answer/7159011](https://support.google.com/googleplay/android-developer/answer/7159011)
- **Conventional Commits:** [conventionalcommits.org](https://www.conventionalcommits.org/)
- **Keep a Changelog:** [keepachangelog.com](https://keepachangelog.com/)

---

## Summary

‚úÖ **Current Status:** Release notes automation is **ENABLED**

Your app will automatically include release notes from `PLAY_STORE_WHATS_NEW.txt` in every Play Store release.

**Before each release:**

1. Update `PLAY_STORE_WHATS_NEW.txt` with new content
2. Keep it under 500 characters
3. Focus on user-facing changes
4. Tag and push

**Consider upgrading to Option 2** if you maintain a CHANGELOG.md for even more automation!

---

**Questions?** Check the troubleshooting section or contact support.

**Happy releasing! üöÄ**
